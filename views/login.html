<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-deep_purple.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <link href="fonts/fontello/css/fontello.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/bootstrap-offset-right.css">
    <link rel="stylesheet" href="css/style.css">

    <style>
        .mdl-textfield__label {
            margin-bottom: 0;
            color: #d7dbdc;
            font-weight: normal;
        }

        .mdl-textfield--floating-label.is-focused .mdl-textfield__label,
        .mdl-textfield--floating-label.is-dirty .mdl-textfield__label {
            text-transform: uppercase
        }

        .has-feedback label~.form-control-feedback {
            top: 15px;
        }

        .mdl-textfield {
            width: 100%;
        }

        .mdl-checkbox__label {
            cursor: text;
            font-size: 13px;
            float: left;
            color: #b0b3b4;
            font-weight: normal;
        }

        .mdl-checkbox__box-outline {
            border: 1px solid #b0b3b4;
        }

        .mdl-textfield__input {
            border: none;
            border-bottom: 1px solid rgba(0, 0, 0, .12);
            display: block;
            font-size: 16px;
            margin: 0;
            padding: 4px 0;
            width: 100%;
            background: 0 0;
            text-align: left;
            color: inherit;
            font-weight: bold;
        }

        .mdl-switch__label {
            float: left;
            font-weight: normal;
            color: #b0b3b4;
            font-size: 14px;
        }
    </style>
</head>

<body>

<div class="container">
    <div class="center-block">
        <div class="col-lg-4 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-12 col-xs-12 no-padding" style="z-index:1">
            <!-- Slider -->

            <div class="mlt-carousel">
                <div id="myCarousel" class="carousel slide carousel-fade" data-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="item active">
                            <img class="img-responsive center-block" src="img/step1.png" alt="step1">
                            <div class="item-content">
                                <h3>La prima nota cassa è un registro delle entrate e uscite dalla cassa.</h3>
                                <p>Sia un professionista, che una grande azienda effettua delle operazioni con denaro contante: pagamenti ricevuti e spese in contanti sfuggono al controllo dell’estratto conto bancario. </p>
                                <p> E’ necessario quindi un documento che tenga in ordine i movimenti in denaro contante: prima nota cassa.</p>
                            </div>
                        </div>
                        <div class="item">
                            <img class="img-responsive center-block" src="img/step2.png" alt="step2">
                            <div class="item-content">
                                <h3>Gestisci i tuoi movimenti con GesGenSuite.</h3>
                                <p>Per tenere sotto controllo tutte le operazioni e per ridurre al minimo la probabilità d’errore. GesGenSuite permette di registrare la prima nota e anche di memorizzare alcuni dettagli che ci consentono di controllare meglio i movimenti. </p>
                                <p>Permette di associare un contatto ad ogni movimento, di registrare i movimenti divisi per risorsa (cassa, banca, carta di credito, etc) e di categorizzare i pagamenti</p>
                            </div>
                        </div>
                        <div class="item">
                            <img class="img-responsive center-block" src="img/step3.png" alt="step3">
                            <div class="item-content">
                                <h3> Quando effettui le seguenti operazioni:</h3>
                                <p>l’incasso di un corrispettivo relativo all’emissione di una ricevuta o di una fattura
                                <p>il pagamento e/o la ricevuta di una fattura di acquisto;</p>
                                <p>il pagamento di un costo come ad esempio, bolli, affitti</p>
                                <p>Con GesGenSuite lo poi fare direttamente dal tuo SmartPhone.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#myCarousel" data-slide-to="1"></li>
                        <li data-target="#myCarousel" data-slide-to="2"></li>
                    </ol>
                </div>
                <!--mlt-carousel-->
            </div>
            <!-- Slider -->
        </div>
        <!-- Login -->

        <div class="col-lg-6 col-lg-offset-right-1 col-md-6 col-md-offset-right-1 col-sm-12 col-xs-12 no-padding">
            <div class="mlt-content">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#login" data-toggle="tab">Login - GestGenSuite</a></li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div class="tab-pane in active fade" id="login">
                        <!--login form-->
                        <form>

                            <div class="col-lg-10 col-lg-offset-1 col-lg-offset-right-1 col-md-10 col-md-offset-1 col-md-offset-right-1 col-sm-12 col-xs-12 pull-right ">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                    <input class="mdl-textfield__input" type="text" id="emailAddress">
                                    <label class="mdl-textfield__label" for="emailAddress">Username</label>
                                </div>
                            </div>

                            <div class="col-lg-10 col-lg-offset-1 col-lg-offset-right-1 col-md-10 col-md-offset-1 col-md-offset-right-1 col-sm-12 col-xs-12 pull-right ">
                                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
                                    <input class="mdl-textfield__input" type="password" id="password">
                                    <label class="mdl-textfield__label" for="password">Password</label>
                                </div>
                            </div>

                            <div class="col-lg-10 col-lg-offset-1 col-lg-offset-right-1 col-md-10 col-md-offset-1 col-md-offset-right-1 col-sm-12 col-xs-12 pull-right ">
                                <div class="row">
                                    <br>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style=" text-align:right;">
                                        <a href="#">Reset Password</a>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-10 col-lg-offset-1 col-lg-offset-right-1 col-md-10 col-md-offset-1 col-md-offset-right-1 col-sm-12 col-xs-12 pull-right ">
                                <button class="btn lt-register-btn">login <i class="icon-right "></i></button>
                            </div>
                        </form>
                        <!--login form-->
                    </div>
                </div>
            </div>
            <!--Login-->
        </div>
        <!--center-block-->
    </div>
    <div class="modal fade" id="myModal1">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <!-- dialog body-->
                <div class="modal-body">
                    <button class="close" type="button" data-dismiss="modal">×</button>
                    <h3>Impossibile Accedere Utente non Autorizzato!</h3>
                </div>
                <!-- dialog buttons-->
                <div class="modal-footer"></div>
            </div>
        </div>
    </div>
    <!--container-->
</div>

</body>
<script src="js/jquery.min.js "></script>
<script src="js/bootstrap.min.js "></script>
<script src="libs/mdl/material.min.js "></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js "></script>

<script>
    //Form validation.
    $('form').validate({
        rules: {
            fname: {
                minlength: 3,
                maxlength: 15,
            }
        },
        errorPlacement: function(error, element) {},
        highlight: function(element) {
            let id_attr = "#" + $(element).attr("id") + "1";
            $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            $(id_attr).removeClass('icon-ok-circled2').addClass('icon-cancel-circled2');
        },
        unhighlight: function(element) {
            let id_attr = "#" + $(element).attr("id") + "1";
            $(element).closest('.form-group').removeClass('has-error').addClass('has-success');
            $(id_attr).removeClass('icon-cancel-circled2').addClass('icon-ok-circled2');
        },
    });

    let datiLogin = {
        'username' : undefined ,
        'password' : undefined
    };

    $('form').on("submit", function(){

        datiLogin.username = $('#emailAddress').val();
        datiLogin.password = $('#password').val();

        $.ajax({
            url: '/loginWeb',
            type: 'POST',
            data: JSON.stringify(datiLogin),
            cache: false,
            contentType: 'application/json',
            success: function(data) {

                if(data.errore===true){
                    $("#myModal1").on("show", function () {
                        $("#myModal1 a.btn").on("click", function (e) {
                            console.log("button pressed");
                            $("#myModal1").modal('hide');
                        });
                    });
                    $("#myModal1").on("hide", function () {
                        $("#myModal1 a.btn").off("click");
                    });

                    $("#myModal1").on("hidden", function () {
                        $("#myModal1").remove();
                    });

                    $("#myModal1").modal({
                        "backdrop": "static",
                        "keyboard": true,
                        "show": true
                    });
                }else if(data.errore===false){

                    $.ajax({
                        url: '/',
                        type: 'POST',
                        data: JSON.stringify({userAuthenticated:true,user:data.id}),
                        cache: false,
                        contentType: 'application/json',
                        success: function (data) {

                            window.location.replace('/dashboard');

                        },
                        faliure: function (data) {

                        }
                    });

                }

            },
            faliure: function(data) {

            }
        });

        return false;
    })
</script>

</html>